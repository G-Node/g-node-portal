
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>METADATA MANAGEMENT &mdash; g-node-portal v0.6 documentation</title>
    <link rel="stylesheet" href="../../_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="g-node-portal v0.6 documentation" href="../../index.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="../../_static/small_flask.css" type= "text/css" rel="stylesheet" />

  </head>
  <body>

<div id="tabhead">
	<div class="logo">

	<!-- HEADER -->
	<div id="header">
		
		<!-- LOGO -->
		<div id="logo">
			<a href="/"><img src="../../_static/logo.gif" alt="G-Node" border="0" /></a>
		</div>
		
		<!-- LOGO PARTNER -->
		<div id="logo_partner">
			<a href="http://www.incf.org/" target="_blank"><img src="../../_static/logopartner.gif" alt="INCF" border="0" /></a>
		</div>

		<!-- KEYVISUAL -->
		<div id="keyvisual">
			<img src="../../_static/default.jpg" alt="" border="0" />
		</div>
    </div>
    </div>
</div>

  
  

    <div id="right_tabs">
        <div class="seitenbreite">
        <ul class="tabs">
          <li><a href="http://www.g-node.org">G-Node Website</a></li>
          <li class="last">
            <a href="https://portal.g-node.org/data/" title="G-NODE PORTAL">Back to the Portal</a>
          </li>
        </ul>
        </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="metadata-management">
<h1>METADATA MANAGEMENT<a class="headerlink" href="#metadata-management" title="Permalink to this headline">¶</a></h1>
<p>You may organize your experimental data using <a class="reference internal" href="../terminology.html#id11"><em>odML Sections and Properties</em></a>. They are useful elements to created flexible nested structures, containing key-value pairs, aimed to help scientists to describe their experiments and annotate recorded data. Below we describe actions available for you to manage your experimental metadata. To better understand our metadata concept please consider a nice example in the <a class="reference internal" href="../../overview.html#overview-metadata"><em>overview</em></a>. For object specification refer to the <a class="reference internal" href="../terminology.html#id11"><em>object model</em></a>.</p>
<div class="section" id="getting-list-of-sections">
<h2>Getting list of sections<a class="headerlink" href="#getting-list-of-sections" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="highlight-python"><pre>GET /metadata/section/?params</pre>
</div>
</div></blockquote>
<p>in addition to the <a class="reference internal" href="query.html"><em>usual filters</em></a>, use the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li>[top] - owned (default), shared - return only top (no parent) sections, owned by the user or shared with the user</li>
</ul>
</div></blockquote>
<p>Example response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "jeff",
"objects_selected": 3,
"selected": [
    {
    "fields": {
        "parent_section": null,
        "tree_position": 0,
        "odml_type": 0,
        "name": "bla",
        "datafile_set": [
            "/datafiles/4",
            "/datafiles/10"
        ],
        "property_set": [],
        "current_state": 10,
        "is_template": false,
        "local_id": 1,
        "safety_level": 3,
        "block_set": [
            "/electrophysiology/block/2",
            "/electrophysiology/block/3"
        ],
        "owner": "/profiles/profile/5",
        "date_created": "2012-08-30T16:18:02",
        "section_set": [(0)],
        "guid": "bef93665387c2702f8eff6302e9ac83d600ae56b",
        "user_custom": null,
        "description": ""
        },
        "model": "metadata.section",
        "permalink": "/metadata/section/1"
    },
    ...
    {
    "fields": {
        "parent_section": "/metadata/section/1",
        "tree_position": 1,
        "odml_type": 0,
        "name": "Electrode",
        "datafile_set": [],
        "property_set": [
            "/metadata/property/1",
            "/metadata/property/2",
            "/metadata/property/3",
            "/metadata/property/4"
        ],
        "current_state": 10,
        "is_template": false,
        "local_id": 3,
        "safety_level": 3,
        "block_set": [],
        "owner": "/profiles/profile/5",
        "date_created": "2012-11-05T17:16:17",
        "section_set": [],
        "guid": "c16eee29a69da4c19bce19f6d16ea7b9406cc366",
        "user_custom": null,
        "description": "Settings and other experimental setup"
        },
        "model": "metadata.section",
        "permalink": "/metadata/section/3"
    }
],
"message": "Here is the list of requested objects.",
"selected_range": [(2)
0,
2
],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
<p>In this example you can see the <a class="reference internal" href="../terminology.html#section"><em>section</em></a> with ID = 1 has a couple of <a class="reference internal" href="../terminology.html#datafile"><em>datafiles</em></a> inside plus a couple of <a class="reference internal" href="../terminology.html#block"><em>blocks</em></a> linked to it. The second section (ID = 2) has no data inside however holds several properties, which describe the experiment.</p>
</div>
<div class="section" id="section-create-or-update">
<h2>Section: create or update<a class="headerlink" href="#section-create-or-update" title="Permalink to this headline">¶</a></h2>
<p>Create and update operations are implemented inline with the <a class="reference internal" href="principles.html"><em>key API principles</em></a>:</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: POST /metadata/section/[section_id/]?params

{
    "parent_section": 2,
    "name": "Electrode",
    "tree_position": 1,
    "odml_type": 0,
    "safety_level": 3,
    "description": "Settings and other experimental setup"
}</pre>
</div>
</div></blockquote>
<p><em>New in the development version:</em>
if you need to create a section from the template (or from other section) provide the parameters below:</p>
<blockquote>
<div><ul class="simple">
<li>source_template - section to copy</li>
<li>[with_properties] - whether or not to copy properties, which belong to the section ()</li>
<li>[with_datafiles] - whether or not to copy links (!!) to datafiles, which belong to the section (in copy mode).</li>
<li>[recursive] - true, false - copy all subsections recursively (in copy mode)</li>
</ul>
</div></blockquote>
<p><em>Note. Files and blocks, contained in the template section, are never duplicated while making a copy: newly created section(s) will not contain any files or other data.</em></p>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP CREATED (201)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [{
    "fields": {
        "tree_position": 1,
        "odml_type": 0,
        "description": "Settings and other experimental setup",
        "current_state": 10,
        "is_template": false,
        "last_modified": "2012-04-10 15:59:00",
        "safety_level": 3,
        "date_created": "2012-04-10 15:59:00",
        "name": "Electrode"
    },
    "model": "metadata.section",
    "permalink": "/metadata/section/18"
}],
"message": "Here is the list of requested objects.",
"selected_range": [0, 0],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="getting-section-details">
<h2>Getting section details<a class="headerlink" href="#getting-section-details" title="Permalink to this headline">¶</a></h2>
<p>Similarly to the usual <a class="reference internal" href="principles.html#get-single-object"><em>GET single object</em></a> request:</p>
<blockquote>
<div><div class="highlight-python"><pre>GET /metadata/section/&lt;section_id&gt;/</pre>
</div>
</div></blockquote>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [{
    "fields": {
        "tree_position": 1,
        "odml_type": 0,
        "description": "Settings and other experimental setup",
        "current_state": 10,
        "is_template": false,
        "last_modified": "2012-04-10 15:59:00",
        "safety_level": 3,
        "date_created": "2012-04-10 15:59:00",
        "name": "Electrode"
        },
    "model": "metadata.section",
    "permalink": "/metadata/section/18"
}],
"message": "Here is the list of requested objects.",
"selected_range": [0, 0],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="delete-section">
<h2>Delete section<a class="headerlink" href="#delete-section" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="highlight-python"><pre>DELETE /metadata/section/&lt;section_id&gt;/?params</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>parameters:</dt>
<dd><ul class="first last simple">
<li>[force] - true, false (default) - use force=1 to delete the section even if there are other users with collaboration role (able to write). If omitted, the section will not be deleted being in the state having collaborators.</li>
</ul>
</dd>
</dl>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
    "message": "Object was deleted.",
    "logged_in_as": "bob",
    "message_type": "deleted"
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="getting-list-of-properties-in-the-section">
<h2>Getting list of properties in the section<a class="headerlink" href="#getting-list-of-properties-in-the-section" title="Permalink to this headline">¶</a></h2>
<p>You basically have to query properties with the filter set on the particular section:</p>
<blockquote>
<div><div class="highlight-python"><pre>GET /metadata/property/?section=&lt;section_id&gt;</pre>
</div>
</div></blockquote>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [
    {
        "fields": {...},
        "model": "metadata.property",
        "permalink": "/metadata/property/1"
    },
    {
        "fields": {...},
        "model": "metadata.property",
        "permalink": "/metadata/property/2"
    }
],
...
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="getting-list-of-blocks-and-files-in-the-section">
<h2>Getting list of blocks and files in the section<a class="headerlink" href="#getting-list-of-blocks-and-files-in-the-section" title="Permalink to this headline">¶</a></h2>
<p>By analogy with the previous example, these requests will look like:</p>
<blockquote>
<div><div class="highlight-python"><pre>GET /datafiles/?section=&lt;section_id&gt;</pre>
</div>
</div></blockquote>
<p>and</p>
<blockquote>
<div><div class="highlight-python"><pre>GET /electrophysiology/block/?section=&lt;section_id&gt;</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="create-or-update-a-property">
<h2>Create or update a property<a class="headerlink" href="#create-or-update-a-property" title="Permalink to this headline">¶</a></h2>
<p>Managing propeties is similar to managing sections and is implemented inline with the <a class="reference internal" href="principles.html"><em>key API principles</em></a>:</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: POST /metadata/property/[&lt;property_id&gt;]/

{
    "comment": "insert some comments here..",
    "definition": "the type of electrode.",
    "name": "type",
    "dependency_value": "",
    "dtype": "",
    "section": 1,
    "uncertainty": "",
    "mapping": "",
    "dependency": "",
    "safety_level": 3,
    "unit": ""
}</pre>
</div>
</div></blockquote>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200) or CREATED (201)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [{
    "fields": {
        "comment": "insert some comments here..",
        "definition": "the type of electrode.",
        ...
        "current_state": 10,
        "last_modified": "2012-04-10 16:18:26",
        "safety_level": 3,
        "date_created": "2012-04-10 16:18:26",
        "unit": ""
    },
    "model": "metadata.property",
    "permalink": "/metadata/property/23"
}],
...
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="getting-a-property">
<h2>Getting a property<a class="headerlink" href="#getting-a-property" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="highlight-python"><pre>GET /metadata/property/&lt;property_id&gt;/</pre>
</div>
</div></blockquote>
<p>Response is very similar to the one provided above.</p>
</div>
<div class="section" id="delete-property">
<h2>Delete property<a class="headerlink" href="#delete-property" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="highlight-python"><pre>DELETE /metadata/property/&lt;property_id&gt;</pre>
</div>
</div></blockquote>
<p>This request permanently moves the property into archive.</p>
</div>
<div class="section" id="getting-list-of-values-of-a-property">
<h2>Getting list of values of a property<a class="headerlink" href="#getting-list-of-values-of-a-property" title="Permalink to this headline">¶</a></h2>
<p>Query values with the filter set on the particular property:</p>
<blockquote>
<div><div class="highlight-python"><pre>GET /metadata/values/?parent_property=&lt;property_id&gt;</pre>
</div>
</div></blockquote>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "jeff",
"objects_selected": 1,
"selected": [
    {
    "fields": {
        "current_state": 10,
        "local_id": 1,
        "safety_level": 3,
        "owner": "/profiles/profile/5",
        "date_created": "2012-09-17T18:19:25",
        "guid": "e02f5eda3c5f5793db8d0f2fbbbee3e524e58799",
        "data": "fre",
        "parent_property": "/metadata/property/1"
    },
    "model": "metadata.value",
    "permalink": "/metadata/value/1"
    }
],
"message": "Here is the list of requested objects.",
"selected_range": [
0,
0
],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="create-or-update-a-value">
<h2>Create or update a value<a class="headerlink" href="#create-or-update-a-value" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="highlight-python"><pre>Request: POST /metadata/value/[&lt;value_id&gt;]/

{
    "data": 375,
    "parent_property": 14586
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="delete-a-value">
<h2>Delete a value<a class="headerlink" href="#delete-a-value" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="highlight-python"><pre>DELETE /metadata/value/&lt;value_id&gt;</pre>
</div>
</div></blockquote>
<p>This request removes value from the associated property.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">METADATA MANAGEMENT</a><ul>
<li><a class="reference internal" href="#getting-list-of-sections">Getting list of sections</a></li>
<li><a class="reference internal" href="#section-create-or-update">Section: create or update</a></li>
<li><a class="reference internal" href="#getting-section-details">Getting section details</a></li>
<li><a class="reference internal" href="#delete-section">Delete section</a></li>
<li><a class="reference internal" href="#getting-list-of-properties-in-the-section">Getting list of properties in the section</a></li>
<li><a class="reference internal" href="#getting-list-of-blocks-and-files-in-the-section">Getting list of blocks and files in the section</a></li>
<li><a class="reference internal" href="#create-or-update-a-property">Create or update a property</a></li>
<li><a class="reference internal" href="#getting-a-property">Getting a property</a></li>
<li><a class="reference internal" href="#delete-property">Delete property</a></li>
<li><a class="reference internal" href="#getting-list-of-values-of-a-property">Getting list of values of a property</a></li>
<li><a class="reference internal" href="#create-or-update-a-value">Create or update a value</a></li>
<li><a class="reference internal" href="#delete-a-value">Delete a value</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/key_functions/data_api/metadata.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    <h2>Questions/Feedback</h2>
    <p>Having any questions? Got an idea how to improve a service? You're welcome to contact us!<br> Please send your questions/feedback to support-at-g-node.org , we are happy to help!</p>
  </div>
  <div class="footer">
    &copy; Copyright 2011, asobolev.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  
  </body>
</html>