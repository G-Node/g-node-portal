
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. DATA API Specification &mdash; g-node-portal v0.6 documentation</title>
    <link rel="stylesheet" href="../_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="g-node-portal v0.6 documentation" href="../index.html" />
    <link rel="up" title="The G-Node DATA API" href="data_api_index.html" />
    <link rel="next" title="2. G-Node API Object Examples" href="api_object_examples.html" />
    <link rel="prev" title="The G-Node DATA API" href="data_api_index.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="../_static/small_flask.css" type= "text/css" rel="stylesheet" />

  </head>
  <body>

<div id="tabhead">
	<div class="logo">

	<!-- HEADER -->
	<div id="header">
		
		<!-- LOGO -->
		<div id="logo">
			<a href="/"><img src="../_static/logo.gif" alt="G-Node" border="0" /></a>
		</div>
		
		<!-- LOGO PARTNER -->
		<div id="logo_partner">
			<a href="http://www.incf.org/" target="_blank"><img src="../_static/logopartner.gif" alt="INCF" border="0" /></a>
		</div>

		<!-- KEYVISUAL -->
		<div id="keyvisual">
			<img src="../_static/default.jpg" alt="" border="0" />
		</div>
    </div>
    </div>
</div>

  
  

    <div id="right_tabs">
        <div class="seitenbreite">
        <ul class="tabs">
          <li><a href="http://www.g-node.org">G-Node Website</a></li>
          <li class="last">
            <a href="https://portal.g-node.org/data/" title="G-NODE PORTAL">Back to the Portal</a>
          </li>
        </ul>
        </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="data-api-specification">
<span id="id1"></span><h1>1. DATA API Specification<a class="headerlink" href="#data-api-specification" title="Permalink to this headline">¶</a></h1>
<div class="section" id="terminology-used-in-this-specification">
<h2>1.1. Terminology used in this specification<a class="headerlink" href="#terminology-used-in-this-specification" title="Permalink to this headline">¶</a></h2>
<p>Throughout this specification, it&#8217;s refered to a series of terms like section or datafile, which are intended to have specific meanings.</p>
<dl class="docutils">
<dt><strong>Datafiles</strong></dt>
<dd>Any data item maintained by G-Node. It can be either a binary/ascii file or a data structure, hosted in the native G-Node format. This could include a PDF file, MP3 file, TXT file, or a raw data structure in the NEO (native G-Node) format (see <a class="reference external" href="http://packages.python.org/electrophysiology/classes.html">http://packages.python.org/electrophysiology/classes.html</a>). A datafile is created by uploading an ordinary file to G-Node, and possibly converting it to the native G-Node format. That is to say, when you upload something like a MultichannelSystems® file, you have an option to convert it to the native format, and then it is considered as a native (raw) data structure in this specification. If you do not convert it when you upload, then it is considered as just &#8220;file&#8221;.</dd>
<dt><strong>Sections</strong></dt>
<dd>A container of other sections, properties or datafiles. Intuitively it&#8217;s like a folder in a usual file system. The Section® is a prototype of the odML section (see <a class="reference external" href="http://www.g-node.org/projects/odml">http://www.g-node.org/projects/odml</a>) and is implemented inline with odML concepts and methodology.</dd>
<dt><strong>Properties and Values</strong></dt>
<dd>A property is a flexible way to annotate your data (implemented in line with odML). Within these could be a model of your recording device, duration of the stimulus, a layer of the cell you record from. Some properties are provided by default when you create a section of either type. You just need to set values, appropriate for your research. Importantly, properties and values are also used to &#8220;label&#8221; your data objects (segments, analog signals, spiketrains etc.), so you can access data from different perspectives using metadata.</dd>
<dt><strong>NEO Raw Data Objects</strong></dt>
<dd>NEO® objects are useful when working with the raw data. NEO objects include Segments, Analog Signals, Spike Trains etc. (see <a class="reference external" href="http://packages.python.org/electrophysiology/classes.html">http://packages.python.org/electrophysiology/classes.html</a>) It is a flexible data structure, compartible with several well-known data-formats, and useful for data analysis. You may convert your files to the NEO (native G-Node) structure using API, when the file is convertible (currently supported information extraction from neuroshare-compliant formats, <a class="reference external" href="http://neuroshare.sourceforge.net/index.shtml">http://neuroshare.sourceforge.net/index.shtml</a>).</dd>
</dl>
<p><em>Note. For all URLs, given later in this specification, you should add a G-Node prefix URL, which is</em> <a class="reference external" href="https://portal.g-node.org/data/">https://portal.g-node.org/data/</a></p>
</div>
<div class="section" id="authentication">
<h2>1.2. AUTHENTICATION<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<p>To authentice at G-Node, please use the following methods:</p>
<div class="section" id="id2">
<h3>1.2.1. Authentication<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>Request: POST /account/authenticate/</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>parameters:</dt>
<dd><ul class="first last simple">
<li>username - user account name</li>
<li>password - user password</li>
</ul>
</dd>
</dl>
<p>A successful response will contain a cookie called <em>sessionid</em>. Use this cookie within every request to work with G-Node API.</p>
<p><em>Note. If you want to just TRY the API from the usual web-browser (like Firefox, Chrome, Safari etc.), just go to the login page (</em> /account/login/ <em>), fill in the login form and subnit it to authenticate. After successful authentication sessionid will be stored in the browser, and you may use the address bar (or any REST-client, for example</em> <a class="reference external" href="https://chrome.google.com/webstore/detail/ahdjpgllmllekelefacdedbjnjaplfjn/">Advanced REST Client for Chrome</a> <em>) to query the API.</em></p>
</div>
</div>
<div class="section" id="key-api-principles">
<h2>1.3. KEY API PRINCIPLES<a class="headerlink" href="#key-api-principles" title="Permalink to this headline">¶</a></h2>
<p>The DATA API is designed in a RESTful way, e.g. to have similar routines for creating, updating and selecting different objects that API supports. To get the list of available objects of a specific type (e.g. Analog signal, or a Section, or a Datafile) you need to send a GET request to the URL, ending with the name of this type, for example:</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /electrophysiology/analogsignal/</pre>
</div>
</div></blockquote>
<p>or</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /metadata/sections/</pre>
</div>
</div></blockquote>
<p>You may filter the list of objects by owner, permissions or specific conditions on the attributes, specifying criterias directly in the GET as parameters. To filter by owner, include owner=&lt;user_name&gt; or owner=&lt;user_ID&gt; parameters. Specify visibility=private or visibility=public or visibility=shared to get only private, public or shared objects respectively. To filter by attributes (field lookups) you need to provide attribute name followed by a double underscore and a lookup type. For example</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /metadata/sections/?owner=alex&amp;visibility=public&amp;name__icontains=experiment</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>The following lookups are supported:</dt>
<dd><ul class="first last simple">
<li>exact</li>
<li>iexact</li>
<li>contains</li>
<li>icontains</li>
</ul>
</dd>
<dt>The following lookups are coming soon:</dt>
<dd><ul class="first last simple">
<li>in</li>
<li>gt</li>
<li>gte</li>
<li>lt</li>
<li>lte</li>
<li>startswith</li>
<li>istartswith</li>
<li>endswith</li>
<li>iendswith</li>
<li>year</li>
<li>month</li>
<li>day</li>
<li>week_day</li>
<li>isnull</li>
<li>search</li>
<li>regex</li>
<li>iregex</li>
</ul>
</dd>
</dl>
<p>DATA API limits the number objects to be retrieved in one request by 1000. If there are more than 1000 objects you should request them using start_index=1000 (start_index=2000 etc.). You may also limit the number of objects by max_objects=&lt;some_number&gt; parameter. The start / end indexes for the selected objects are usually contained in the response as &#8220;selected_range&#8221;. For example:</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /metadata/sections/?start_index=120&amp;max_objects=300</pre>
</div>
</div></blockquote>
<p>To get a single object you should specify its ID at the end of the URL:</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /metadata/sections/10/</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>You may also control the amount of the information about avery object you receive using the q parameter. Supported values are:</dt>
<dd><ul class="first last simple">
<li>&#8216;link&#8217; - just permalink</li>
<li>&#8216;info&#8217; - object with local attributes</li>
<li>&#8216;beard&#8217; - object with local attributes AND foreign keys resolved</li>
<li>&#8216;data&#8217; - data-arrays or any high-volume data associated</li>
<li>&#8216;full&#8217; - everything mentioned above</li>
</ul>
</dd>
</dl>
<p>This works with both list of objects and single objects. For example</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /metadata/sections/2/?q=full</pre>
</div>
</div></blockquote>
<p>will retrieve the full information about the section:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
    "logged_in_as": "bob",
    "objects_selected": 1,
    "selected": [{
        "fields": {
            "parent_section": null,
            "tree_position": 1,
            "odml_type": 20,
            "name": "stimulus",
            "datafile_set": [],
            "property_set": [
                "metadata/properties/10",
                "metadata/properties/11",
                "metadata/properties/15"
            ],
            "current_state": 10,
            "is_template": false,
            "last_modified": "2012-03-05 16:45:26",
            "safety_level": 2,
            "block_set": [],
            "owner": 2,
            "date_created": "2012-02-23 18:19:53",
            "section_set": [
                "metadata/sections/4",
                "metadata/sections/6"
            ],
            "user_custom": null,
            "description": ""
        },
        "model": "metadata.section",
        "permalink": "metadata/sections/2"
    }],
    "message": "Here is the list of requested objects.",
    "selected_range": [0, 0],
    "message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
<p>To update one or several attributes of an object send POST to the object permalink, providing new parameters / values in the POST body. For example, this request updates the name and comment for the property with ID 2:</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: POST /metadata/properties/2/

{
    "name": "15 - here is new name",
    "comment": "We just changed the property name"
}</pre>
</div>
</div></blockquote>
<p>Bulk object update is also possible. To make changes to several objects at once, you need to provide bulk_update=1 parameter. Changes will be applied to all objects in the selection; use filters so select only objects, that have to be changed. The following resuest moves all properties with name having &#8220;sampling&#8221; to the section with ID 146:</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: POST /metadata/properties/2/?name__icontains=sampling

{
    "section": 146
}</pre>
</div>
</div></blockquote>
<p>Send the DELETE request to an object permalink to permanently archive it.</p>
</div>
<div class="section" id="data-management">
<h2>1.4. DATA MANAGEMENT<a class="headerlink" href="#data-management" title="Permalink to this headline">¶</a></h2>
<p>G-Node Data API provides a common set of objects for dealing with electro-physiological (in vivo and/or simulated) data. It is based on the NEO® data object model. NEO® approach provides common names and concepts to deal with electrophysiological data in an easy and well-structured way. It accounts for the trade-off between minimizing the data validation routine and at the same time keeping sufficient consistency. The NEO® data model concept is already used in several neuroscientific projects (OpenElectrophy, NeuroTools) and thus provides a promising opportunity to cooperate with other initiatives while not increasing the number of existing standards. On top of this data model we provide a set of core services (Data API). You may work with raw data objects - Spike Trains, Analog Signals, combining them in Segments, performing computations with analog signals and spike trains (sum, mean, fft etc.), and store new results back to the G-Node. The following types of raw data objects are supported:</p>
<blockquote>
<div><ul class="simple">
<li>block</li>
<li>segment</li>
<li>event</li>
<li>eventarray</li>
<li>epoch</li>
<li>epocharray</li>
<li>unit</li>
<li>spiketrain</li>
<li>analogsignal</li>
<li>analogsignalarray</li>
<li>irsaanalogsignal</li>
<li>spike</li>
<li>recordingchannelgroup</li>
<li>recordingchannel</li>
</ul>
</div></blockquote>
<p>Every object serves a specific purpose to organize your electrophysiological data. &#8216;Block&#8217;s mainly represent one experiment (or the whole data, recorded within one experiment). &#8216;Segment&#8217; represents an experimental trial, a &#8220;time frame&#8221; within an experiment with unique experimental conditions. Blocks may contain segments, like experiment consists of several trials. A &#8216;Segment&#8217; may contain &#8216;AnalogSignal&#8217;s, &#8216;Event&#8217;s or &#8216;Epoch&#8217;s, which are being used to organize recorded signals, single time events, or events with duration inside one experimental time-frame. Segment may also contain &#8216;SpikeTrain&#8217; objects to accommodate the spike data, sorted online. For every &#8216;Block&#8217; one may define a set of &#8216;RecordingChannel&#8217;s according to the experimental setup. These channels can be organized under a &#8216;RecordingChannelGroup&#8217;, to keep track of tethrodes or anything else. &#8216;AnalogSignals&#8217; can be linked to the appropriate &#8216;RecordingChannel&#8217;s to make the dataset consistent.</p>
<p>You may find more information and the original description of NEO® classes here <a class="reference external" href="http://packages.python.org/neo/classes.html">NEO classes</a>.</p>
<p>Every raw data object has a set of <em>attributes</em>, <em>data fields</em>, it may also have relationships, like <em>parents</em> and <em>children</em>. For example, a segment has to have an attribute &#8216;name&#8217;. &#8216;AnalogSignal&#8217; should have a &#8216;sampling_rate&#8217; data field, which consists of the unit (say, Hz) and a value (say, 20000). A &#8216;Block&#8217; consists of &#8216;Segments&#8217;, which means the &#8216;Block&#8217; has a child &#8216;Segment&#8217;, and a &#8216;Segment&#8217; has a parent &#8216;Block&#8217;. In the following tables you may find object descriptions:</p>
<p><strong>Table 2.1 Object Simple Attributes</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Object Type</th>
<th class="head">Attributes</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>block</td>
<td>&#8216;name&#8217;*, &#8216;filedatetime&#8217;, &#8216;index&#8217;</td>
</tr>
<tr><td>segment</td>
<td>&#8216;name&#8217;*, &#8216;filedatetime&#8217;, &#8216;index&#8217;</td>
</tr>
<tr><td>event</td>
<td>&#8216;label&#8217;*</td>
</tr>
<tr><td>eventarray</td>
<td>No attributes</td>
</tr>
<tr><td>epoch</td>
<td>&#8216;label&#8217;*</td>
</tr>
<tr><td>epocharray</td>
<td>No attributes</td>
</tr>
<tr><td>unit</td>
<td>&#8216;name&#8217;*</td>
</tr>
<tr><td>spiketrain</td>
<td>No attributes</td>
</tr>
<tr><td>analogsignal</td>
<td>&#8216;name&#8217;*</td>
</tr>
<tr><td>analogsignalarray</td>
<td>No attributes</td>
</tr>
<tr><td>irsaanalogsignal</td>
<td>&#8216;name&#8217;*</td>
</tr>
<tr><td>spike</td>
<td>No attributes</td>
</tr>
<tr><td>recordingchannelgroup</td>
<td>&#8216;name&#8217;*</td>
</tr>
<tr><td>recordingchannel</td>
<td>&#8216;name&#8217;*, &#8216;index&#8217;</td>
</tr>
</tbody>
</table>
<p><em>Note. Attributes with * asterisk are mandatory.</em></p>
<p><strong>Table 2.2 Object Data Fields (attributes with units)</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Object Type</th>
<th class="head">Data fields</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>event</td>
<td>&#8216;time&#8217;</td>
</tr>
<tr><td>epoch</td>
<td>&#8216;time&#8217;, &#8216;duration&#8217;</td>
</tr>
<tr><td>spiketrain</td>
<td>&#8216;t_start&#8217;, &#8216;t_stop&#8217;, &#8216;times&#8217;, &#8216;waveforms&#8217;</td>
</tr>
<tr><td>analogsignal</td>
<td>&#8216;sampling_rate&#8217;, &#8216;t_start&#8217;, &#8216;signal&#8217;</td>
</tr>
<tr><td>irsaanalogsignal</td>
<td>&#8216;t_start&#8217;, &#8216;signal&#8217;, &#8216;times&#8217;</td>
</tr>
<tr><td>spike</td>
<td>&#8216;left_sweep&#8217;, &#8216;time&#8217;, &#8216;sampling_rate&#8217;, &#8216;waveforms&#8217;</td>
</tr>
</tbody>
</table>
<p><strong>Table 2.3 Object Children</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Object Type</th>
<th class="head">Children</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>block</td>
<td>&#8216;segment&#8217;, &#8216;recordingchannelgroup&#8217;</td>
</tr>
<tr><td>segment</td>
<td>&#8216;analogsignal&#8217;, &#8216;irsaanalogsignal&#8217;, &#8216;analogsignalarray&#8217;, &#8216;spiketrain&#8217;, &#8216;spike&#8217;, &#8216;event&#8217;, &#8216;eventarray&#8217;, &#8216;epoch&#8217;, &#8216;epocharray&#8217;</td>
</tr>
<tr><td>eventarray</td>
<td>&#8216;event&#8217;</td>
</tr>
<tr><td>epocharray</td>
<td>&#8216;epoch&#8217;</td>
</tr>
<tr><td>unit</td>
<td>&#8216;spiketrain&#8217;,&#8217;spike&#8217;</td>
</tr>
<tr><td>analogsignalarray</td>
<td>&#8216;analogsignal&#8217;</td>
</tr>
<tr><td>recordingchannelgroup</td>
<td>&#8216;recordingchannel&#8217;, &#8216;analogsignalarray&#8217;</td>
</tr>
<tr><td>recordingchannel</td>
<td>&#8216;unit&#8217;, &#8216;analogsignal&#8217;, &#8216;irsaanalogsignal&#8217;</td>
</tr>
</tbody>
</table>
<p><strong>Table 2.4 Object Parents</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Object Type</th>
<th class="head">Parents</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>segment</td>
<td>&#8216;block&#8217;</td>
</tr>
<tr><td>event</td>
<td>&#8216;segment&#8217;, &#8216;eventarray&#8217;</td>
</tr>
<tr><td>eventarray</td>
<td>&#8216;segment&#8217;</td>
</tr>
<tr><td>epoch</td>
<td>&#8216;segment&#8217;, &#8216;epocharray&#8217;</td>
</tr>
<tr><td>epocharray</td>
<td>&#8216;segment&#8217;</td>
</tr>
<tr><td>unit</td>
<td>&#8216;recordingchannel&#8217;</td>
</tr>
<tr><td>spiketrain</td>
<td>&#8216;segment&#8217;, &#8216;unit&#8217;</td>
</tr>
<tr><td>analogsignal</td>
<td>&#8216;segment&#8217;, &#8216;analogsignalarray&#8217;, &#8216;recordingchannel&#8217;</td>
</tr>
<tr><td>analogsignalarray</td>
<td>&#8216;segment&#8217;</td>
</tr>
<tr><td>irsaanalogsignal</td>
<td>&#8216;segment&#8217;, &#8216;recordingchannel&#8217;</td>
</tr>
<tr><td>spike</td>
<td>&#8216;segment&#8217;, &#8216;unit&#8217;</td>
</tr>
<tr><td>recordingchannelgroup</td>
<td>&#8216;block&#8217;</td>
</tr>
<tr><td>recordingchannel</td>
<td>&#8216;recordingchannelgroup&#8217;</td>
</tr>
</tbody>
</table>
<p>G-Node Data API supports a number of functions to manage objects, listed above. The following sections 2.1 - 2.8 give an overview .</p>
<div class="section" id="create-or-update-data-object">
<h3>1.4.1. 2.1 Create or update data object<a class="headerlink" href="#create-or-update-data-object" title="Permalink to this headline">¶</a></h3>
<p>Send an authorized HTTP request with the body (in JSON format), providing object data (attributes, arrays and relationships), to</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: POST /electrophysiology/&lt;object_type&gt;/</pre>
</div>
</div></blockquote>
<p>in order to create a new NEO object. You should specify object attributes, data fields (if exist), and relationships in the request body as a JSON object. For example, send an authorized HTTP POST request to the &#8220;/electrophysiology/segment&#8221; with the following body</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP POST /electrophysiology/segment/

{
    "name": "Trial 12, Saccade, Stim. 45 grad color red",
    "filedatetime": "10/05/2011",
    "index": 12
}</pre>
</div>
</div></blockquote>
<p>to create a new segment. If the response status is &#8216;Created&#8217; (201) a client receives a new ID of a segment from the response. Here is the response example:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP CREATED (201)

{
    "logged_in_as": "bob",
    "objects_selected": 1,
    "selected": [{
            "fields": {
            "index": 12,
            "name": "Trial 12, Saccade, Stim. 45 grad color red",
            "current_state": 10,
            "filedatetime": null,
            "last_modified": "2012-04-10 13:38:23",
            "safety_level": 3,
            "date_created": "2012-04-10 13:38:23"
            },
        "model": "neo_api.segment",
        "permalink": "/electrophysiology/segment/1"
    }],
    "message": "Object created successfully.",
    "selected_range": [0, 0],
    "message_type": "object_created"
}</pre>
</div>
</div></blockquote>
<p>A full set of examples for all supported NEO object can be found here (<a class="reference internal" href="api_object_examples.html#api-object-examples"><em>G-Node API Object Examples</em></a>).</p>
<p><em>Note. To understand, which attributes, data fields and relationships are supported for every NEO object please consider Tables 2.1 - 2.4, as well as the NEO specification</em> (<a class="reference external" href="http://packages.python.org/electrophysiology/classes.html">http://packages.python.org/electrophysiology/classes.html</a>).</p>
<p>To update the segment, changing some ot its parameters, you need to send an authorized HTTP POST to the same URL providing the ID of the segment at the end of the URL. Assuming the segment we&#8217;ve just created was assigned an ID = 213, send an HTTP POST to the &#8220;/electrophysiology/segment/213/&#8221; with the following body</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP POST /electrophysiology/segment/213/

{
    "name": "Trial 12, Saccade, Stim. 45 grad color green",
    "block": 1
}</pre>
</div>
</div></blockquote>
<p>to change the name of the segment and link it to the Block with ID 1. When update is required, you may specify only those parameters that you want to update. All other attributes, arrays and relationships will stay as they were.</p>
<p>A response should look similar to this:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [{
    "fields": {
        "index": 12,
        "name": "Trial 12, Saccade, Stim. 45 grad color green",
        "current_state": 10,
        "filedatetime": null,
        "last_modified": "2012-04-10 13:38:23",
        "safety_level": 3,
        "date_created": "2012-04-10 13:38:23"
    },
    "model": "neo_api.segment",
    "permalink": "/electrophysiology/segment/1"
}],
"message": "Here is the list of requested objects.",
"selected_range": [0, 0],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
<p>The NEO® model sugest object relationships, like a segment may be connected to a block. Object relationaships help to quickly organize neurophysiological data in the consistent and easily accessible structure. The full list of supported connections can be found in Tables 2.3 - 2.4. Please provide the relationships inside the POST request to save appropriate data structure of your recordings. Consider the examples page (<a class="reference internal" href="api_object_examples.html#api-object-examples"><em>G-Node API Object Examples</em></a>).</p>
<p>Some objects have data fields - they are similar to normal attributes, however one should also specify data units to save them (a signal data field of Analog Signal object typically has units &#8220;mV&#8221;, Event object has &#8220;time&#8221; in &#8220;ms&#8221; etc). To save or update the associated object data, provide object data in the request body under a corresponding parameter, as shown in examples page (<a class="reference internal" href="api_object_examples.html#api-object-examples"><em>G-Node API Object Examples</em></a>). You may find the whole list of data-related objects with corresponding parameters in the table 2.2 above.</p>
<dl class="docutils">
<dt><em>Note. For the moment, the following unit types are supported:</em></dt>
<dd><ul class="first last simple">
<li>in time domain: &#8220;s&#8221;, &#8220;ms&#8221;, &#8220;mcs&#8221;</li>
<li>in signal domain: &#8220;v&#8221;, &#8220;mv&#8221;, &#8220;mcv&#8221;</li>
<li>sampling rate for signals: &#8220;hz&#8221;, &#8220;khz&#8221;, &#8220;mhz&#8221;, &#8220;1/s&#8221;</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="getting-a-single-object">
<h3>1.4.2. Getting a single object<a class="headerlink" href="#getting-a-single-object" title="Permalink to this headline">¶</a></h3>
<p>To get a NEO object with its attributes send a following GET request</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /electrophysiology/&lt;obj_type&gt;/&lt;obj_id&gt;/</pre>
</div>
</div></blockquote>
<p>You&#8217;ll get the response, similar to:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [{
    "fields": {
        "name": "From File: data_in_csv.txt, #952",
        "signal_size": 12000,
        "current_state": 10,
        "last_modified": "2012-03-22 17:19:41",
        "safety_level": 3,
        "date_created": "2012-03-22 17:19:41"
    },
    "model": "neo_api.analogsignal",
    "permalink": "/electrophysiology/analogsignal/952"
}],
"message": "Here is the list of requested objects.",
"selected_range": [0, 0],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
<p>Play with the q request GET parameter to get different information about an object, including its attributes, data arrays, downstream and upstream relationships. In the following sections you&#8217;ll also find how to request a slice of the signal(s), when the signal is very long.</p>
</div>
<div class="section" id="partial-data-requests">
<h3>1.4.3. Partial Data Requests<a class="headerlink" href="#partial-data-requests" title="Permalink to this headline">¶</a></h3>
<p>You may want to request object data or relationaships only (see list of objects and their attributes, data fields and relationaships in the Tables 2.1 - 2.4), or even just get the overall information about an object (like object size) without getting any data or attributes. We support the following parameters for all GET requests for a single object</p>
<blockquote>
<div><ul class="simple">
<li>[q] - can be one of &#8220;full&#8221;, &#8220;info&#8221;, &#8220;data&#8221;, &#8220;beard&#8221;, &#8220;link&#8221;. The response will contain content varying from just generic object information (&#8220;link&#8221;, &#8220;info&#8221;) to the full response (&#8220;full&#8221;).</li>
<li>[cascade] - when set to &#8220;True&#8221; will recursively retrieve all the children objects (not only their IDs). Please be careful with such requests, requesting a big block in a &#8220;cascade&#8221; mode may result in several Gigobytes of data to download, and significant delays.</li>
</ul>
</div></blockquote>
<p>Specifically for signal-based objects (Analog Signal, Irregularly Sampled Signal) the following GET request parameters are supported:</p>
<blockquote>
<div><ul class="simple">
<li>[start_time] - start time of the required range (calculated using the same time unit as the t_start of the signal)</li>
<li>[end_time] - end time of the required range (calculated using the same time unit as the t_start of the signal)</li>
<li>[duration] - duration of the required range (calculated using the same time unit as the t_start of the signal)</li>
<li>[start_index] - start index of the required datarange (an index of the starting datapoint)</li>
<li>[end_index] - end index of the required range (an index of the end datapoint)</li>
<li>[samples_count] - number of points of the required range (an index of the end datapoint)</li>
<li>[downsample] - number of datapoints. This parameter is used to indicate whether downsampling is needed. The downsampling is applied on top of the selected data range using other parameters (if specified).</li>
</ul>
</div></blockquote>
<p><em>Note. Some reasonable combinations of these parameters (like &#8216;start_time&#8217; and &#8216;duration&#8217; or &#8216;start_index&#8217; and &#8216;end_time&#8217; will return a correct response. Using redundant number of parameters will lead to their disregard, useless combinations may throw a 400 bad request.</em></p>
<p>For example, send the following GET request</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /electrophysiology/analogsignal/11/?start_index=30&amp;end_index=100&amp;downsample=10&amp;q=data</pre>
</div>
</div></blockquote>
<p>to get the Analog Signal range with datapoints as of 30 to 100, downsampled from 71 points to 10:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [{
    "fields": {
        "sampling_rate": {
            "units": "hz",
            "data": 10000
        },
        "signal": {
            "units": "mv",
            "data": [
                -109.15087908065715,
                -143.56599349341815,
                -123.28235629296393,
                -116.57424590237954,
                -85.95255136469267,
                -86.48956135366747,
                -45.100152757898336,
                -29.496947080422245,
                -52.86667933701428,
                -30.721555308717267
            ]},
        "t_start": {
            "units": "ms",
            "data": 3
        }
    },
    "model": "neo_api.analogsignal",
    "permalink": "/electrophysiology/analogsignal/11"
    }
}],
"message": "Here is the list of requested objects.",
"selected_range": [0, 0],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
<p>Notice that the &#8220;t_start&#8221; data field in the response has a data value of 3, indicating the start of the retrieved signal.</p>
</div>
<div class="section" id="getting-a-list-of-objects">
<h3>1.4.4. Getting a List of Objects<a class="headerlink" href="#getting-a-list-of-objects" title="Permalink to this headline">¶</a></h3>
<p>Use the following HTTP GET</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /electrophysiology/&lt;object_type&gt;/?params</pre>
</div>
</div></blockquote>
<p>to query NEO objects of a specific type. For example, if you want to get all Analog Signals available for a specific user, send the following request</p>
<blockquote>
<div><div class="highlight-python"><pre>GET /electrophysiology/analogsignal/?max_results=3&amp;q=link</pre>
</div>
</div></blockquote>
<p>You receive a list of Analog Signal permalinks as a response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [
    {
    "fields": {},
    "model": "neo_api.analogsignal",
    "permalink": "/electrophysiology/analogsignal/1"
    },
    {
    "fields": {},
    "model": "neo_api.analogsignal",
    "permalink": "/electrophysiology/analogsignal/2"
    },
    {
    "fields": {},
    "model": "neo_api.analogsignal",
    "permalink": "/electrophysiology/analogsignal/3"
    }
],
"message": "Here is the list of requested objects.",
"selected_range": [0, 0],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
<p>By default the API will return the first 1000 data objects in the response. Use filters to refine the selection:</p>
<blockquote>
<div><ul class="simple">
<li>[visibility] - private, public, shared, all (default) - which types of sections to return</li>
<li>[owner] - filter by an owner of the file</li>
<li>[created_min] - filters files older than created_min (format &#8220;YYYY-MM-DD HH:MM:SS&#8221;)</li>
<li>[created_max] - filters files younger than created_max (format &#8220;YYYY-MM-DD HH:MM:SS&#8221;)</li>
<li>[q] - can be one of &#8220;full&#8221;, &#8220;info&#8221;, &#8220;data&#8221;, &#8220;beard&#8221;, &#8220;link&#8221;. The response will contain content varying from just generic object information (&#8220;link&#8221;, &#8220;info&#8221;) to the full response (&#8220;full&#8221;).</li>
<li>[max-results] - maximum number of results to be retrieved (default is 1000, provide this parameter if you need to query less or more).</li>
<li>[start-index] - 1-based index of the first result to be retrieved</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="data-annotation">
<h3>1.4.5. Data Annotation<a class="headerlink" href="#data-annotation" title="Permalink to this headline">¶</a></h3>
<p>You may annotate (or &#8220;tag&#8221; or &#8220;label&#8221;) one or several Raw Data objects with particular metadata values by using the following request:</p>
<blockquote>
<div><div class="highlight-python"><pre>POST /electrophysiology/analogsignal/11/

{
    "metadata": [
        "/metadata/values/2",
        "/metadata/values/15"
    ]
}</pre>
</div>
</div></blockquote>
<p>If the POST request is sent to the selection (several objects), all objects in the selection will be updated. Importantly, by default metadata values are added to the existing metadata values. If you need to completely overwrite object&#8217;s metadata, provide m2m_append=0 parameter in the request. This is the way to remove object metadata, providing empty list together with m2m_append=0.</p>
<p><em>Note. For example, you have an experiment with stimulus which changes its color across trials. You have several Analog Signals recorded, and you want to indicate, which of those were recorded under which stimulus condition. Assume in the experiment section tree you already defined a property, say, &#8220;StimulusColor&#8221; with values &#8220;red, green, blue&#8221;. In that case, annotate all required Analog Signals with appropriate metadata values, assigning a &#8220;red&#8221; value to the signals recorded when the Stimulius was red etc.</em></p>
</div>
</div>
<div class="section" id="metadata-management">
<h2>1.5. METADATA MANAGEMENT<a class="headerlink" href="#metadata-management" title="Permalink to this headline">¶</a></h2>
<p>You may organize your experimental data using odML Sections and Properties. They are useful elements to created flexible nested structures, containing key-value pairs, aimed to help scientists to describe their experiments and annotate recorded data. Here are the actions available for you to manage your experimental metadata.</p>
<div class="section" id="getting-list-of-sections">
<h3>1.5.1. Getting list of sections<a class="headerlink" href="#getting-list-of-sections" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>GET /metadata/sections/?params</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>parameters:</dt>
<dd><ul class="first last simple">
<li>[visibility] - private, public, shared, all (default) - which types of sections to return</li>
<li>[top] - owned (default), shared - return only top (no parent) sections, owned by the user or shared with the user</li>
<li>[owner] - filter by an owner of the file</li>
<li>[created_min] - filters files older than created_min (format &#8220;YYYY-MM-DD HH:MM:SS&#8221;)</li>
<li>[created_max] - filters files younger than created_max (format &#8220;YYYY-MM-DD HH:MM:SS&#8221;)</li>
<li>[q] - can be one of &#8220;full&#8221;, &#8220;info&#8221;, &#8220;data&#8221;, &#8220;beard&#8221;, &#8220;link&#8221;. The response will contain content varying from just generic object information (&#8220;link&#8221;, &#8220;info&#8221;) to the full response (&#8220;full&#8221;).</li>
<li>[max-results] - maximum number of results to be retrieved (default is 1000, provide this parameter if you need to query less or more).</li>
<li>[start-index] - 1-based index of the first result to be retrieved</li>
</ul>
</dd>
</dl>
<p>Example response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [
    {
    "fields": {},
    "model": "metadata.section",
    "permalink": "/metadata/sections/3"
    },
    {
    "fields": {},
    "model": "metadata.section",
    "permalink": "/metadata/sections/1"
    },
    {
    "fields": {},
    "model": "metadata.section",
    "permalink": "/metadata/sections/2"
    }
],
"message": "Here is the list of requested objects.",
"selected_range": [0, 0],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="section-create">
<h3>1.5.2. Section: create<a class="headerlink" href="#section-create" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>Request: POST /metadata/sections/?params

{
    "parent_section": 2,
    "name": "Electrode",
    "tree_position": 1,
    "odml_type": 0,
    "safety_level": 3,
    "description": "Settings and other experimental setup"
}</pre>
</div>
</div></blockquote>
<p>New in the development version:
if you need to create a section from the template (or from other section) - like a normal copy operations, provide the parameters below:</p>
<blockquote>
<div><ul class="simple">
<li>source_template - section to copy</li>
<li>[with_properties] - whether or not to copy properties, which belong to the section ()</li>
<li>[with_datafiles] - whether or not to copy links (!!) to datafiles, which belong to the section (in copy mode).</li>
<li>[recursive] - true, false - copy all subsections recursively (in copy mode)</li>
</ul>
</div></blockquote>
<p><em>Note. Files and blocks, contained in the template section, are never duplicated while making a copy: newly created section(s) will not contain any files or other data.</em></p>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP CREATED (201)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [{
        "fields": {
        "tree_position": 1,
        "odml_type": 0,
        "description": "Settings and other experimental setup",
        "current_state": 10,
        "is_template": false,
        "last_modified": "2012-04-10 15:59:00",
        "safety_level": 3,
        "date_created": "2012-04-10 15:59:00",
        "name": "Electrode"
    },
    "model": "metadata.section",
    "permalink": "/metadata/sections/18"
}],
"message": "Here is the list of requested objects.",
"selected_range": [0, 0],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="getting-section-details">
<h3>1.5.3. Getting section details<a class="headerlink" href="#getting-section-details" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>GET /metadata/sections/&lt;section_id&gt;</pre>
</div>
</div></blockquote>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [{
    "fields": {
        "tree_position": 1,
        "odml_type": 0,
        "description": "Settings and other experimental setup",
        "current_state": 10,
        "is_template": false,
        "last_modified": "2012-04-10 15:59:00",
        "safety_level": 3,
        "date_created": "2012-04-10 15:59:00",
        "name": "Electrode"
        },
    "model": "metadata.section",
    "permalink": "/metadata/sections/18"
}],
"message": "Here is the list of requested objects.",
"selected_range": [0, 0],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="delete-section">
<h3>1.5.4. Delete section<a class="headerlink" href="#delete-section" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>DELETE /metadata/sections/&lt;section_id&gt;/?params</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>parameters:</dt>
<dd><ul class="first last simple">
<li>[force] - true, false (default) - use force=1 to delete the section even if there are other users with collaboration role (able to write). If omitted, the section will not be deleted being in the state having collaborators.</li>
</ul>
</dd>
</dl>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;message&quot;</span><span class="p">:</span> <span class="s">&quot;Object was deleted.&quot;</span><span class="p">,</span>
    <span class="s">&quot;logged_in_as&quot;</span><span class="p">:</span> <span class="s">&quot;bob&quot;</span><span class="p">,</span>
    <span class="s">&quot;message_type&quot;</span><span class="p">:</span> <span class="s">&quot;deleted&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="getting-list-of-properties">
<h3>1.5.5. Getting list of properties<a class="headerlink" href="#getting-list-of-properties" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>GET /metadata/properties/</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>parameters:</dt>
<dd><ul class="first last simple">
<li>[section_id] - properties in a specific section (all by default)</li>
<li>[q] - can be one of &#8220;full&#8221;, &#8220;info&#8221;, &#8220;data&#8221;, &#8220;beard&#8221;, &#8220;link&#8221;. The response will contain content varying from just generic object information (&#8220;link&#8221;, &#8220;info&#8221;) to the full response (&#8220;full&#8221;).</li>
<li>[max-results] - maximum number of results to be retrieved (default is 1000, provide this parameter if you need to query more).</li>
</ul>
</dd>
</dl>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [
    {
        "fields": {},
        "model": "metadata.property",
        "permalink": "/metadata/properties/1"
    },
    {
        "fields": {},
        "model": "metadata.property",
        "permalink": "/metadata/properties/2"
    }
],
"message": "Here is the list of requested objects.",
"selected_range": [0, 0],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="create-or-update-a-property">
<h3>1.5.6. Create or update a property<a class="headerlink" href="#create-or-update-a-property" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>Request: POST /metadata/properties/&lt;property_id&gt;/

{
    "comment": "insert some comments here..",
    "definition": "the type of electrode.",
    "name": "type",
    "dependency_value": "",
    "dtype": "",
    "section": 1,
    "uncertainty": "",
    "mapping": "",
    "dependency": "",
    "safety_level": 3,
    "unit": ""
}</pre>
</div>
</div></blockquote>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200) or CREATED (201)

{
"logged_in_as": "bob",
"objects_selected": 1,
"selected": [{
    "fields": {
        "comment": "insert some comments here..",
        "definition": "the type of electrode.",
        "name": "type",
        "dependency_value": "",
        "dtype": "",
        "uncertainty": "",
        "current_state": 10,
        "mapping": "",
        "dependency": "",
        "last_modified": "2012-04-10 16:18:26",
        "safety_level": 3,
        "date_created": "2012-04-10 16:18:26",
        "unit": ""
    },
    "model": "metadata.property",
    "permalink": "/metadata/properties/23"
}],
"message": "Here is the list of requested objects.",
"selected_range": [0, 0],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="getting-a-property">
<h3>1.5.7. Getting a property<a class="headerlink" href="#getting-a-property" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>GET /metadata/properties/&lt;property_id&gt;</pre>
</div>
</div></blockquote>
<p>Response is similar to the above.</p>
</div>
<div class="section" id="delete-property">
<h3>1.5.8. Delete property<a class="headerlink" href="#delete-property" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>DELETE /metadata/properties/&lt;property_id&gt;</pre>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="file-management">
<h2>1.6. FILE MANAGEMENT<a class="headerlink" href="#file-management" title="Permalink to this headline">¶</a></h2>
<div class="section" id="getting-list-of-datafiles">
<h3>1.6.1. Getting list of datafiles<a class="headerlink" href="#getting-list-of-datafiles" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /datafiles/?params</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>parameters:</dt>
<dd><ul class="first last simple">
<li>[section_id] - return files only in a specific section (all files if not provided)</li>
<li>[visibility] - private, public, shared, all (default) - which types of files to return</li>
<li>[owner] - filter by an owner of the file</li>
<li>[created_min] - filters files older than created_min</li>
<li>[created_max] - filters files younger than created_max</li>
<li>[q] - can be one of &#8220;full&#8221;, &#8220;info&#8221;, &#8220;data&#8221;, &#8220;beard&#8221;, &#8220;link&#8221;. The response will contain content varying from just generic object information (&#8220;link&#8221;, &#8220;info&#8221;) to the full response (&#8220;full&#8221;).</li>
<li>[max-results] - maximum number of results to be retrieved (default is 1000, provide this parameter if you need to query more).</li>
</ul>
</dd>
</dl>
<p>Typically you should get the following response:</p>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
"logged_in_as": "bob",
"objects_selected": 2,
"selected": [
    {
    "fields": {
        "last_task_id": "2a3c89f4-9328-46aa-801e-b7bf88740f8f",
        "title": "ascii_csv.txt",
        "extracted_info": null,
        "tags": "",
        "current_state": 10,
        "operations_log": "python-neuroshare: failure ascii-csv: success ",
        "conversion_type": 3,
        "caption": "",
        "last_modified": "2012-03-14 17:27:08",
        "safety_level": 3,
        "date_created": "2012-03-14 17:27:08"
    },
    "model": "datafiles.datafile",
    "permalink": "/datafiles/9"
    },
    {
    "fields": {
        "last_task_id": "7c260cfa-2395-40b7-907e-065088f41498",
        "title": "ascii_csv.txt",
        "extracted_info": null,
        "tags": "",
        "current_state": 10,
        "operations_log": "python-neuroshare: failure ascii-csv: success ascii-csv: parsing successul ascii-csv: parsing successul objects parsed: 3ascii-csv: parsing successul objects parsed: 3",
        "conversion_type": 3,
        "caption": "",
        "last_modified": "2012-03-15 10:27:45",
        "safety_level": 3,
        "date_created": "2012-03-14 17:29:21"
    },
    "model": "datafiles.datafile",
    "permalink": "/datafiles/10"
    }
],
"message": "Here is the list of requested objects.",
"selected_range": [0, 1],
"message_type": "object_selected"
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="getting-single-file-details">
<h3>1.6.2. Getting single file details<a class="headerlink" href="#getting-single-file-details" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /datafiles/&lt;datafile_id&gt;</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="upload-a-datafile-with-or-without-conversion">
<h3>1.6.3. Upload a datafile (with or without conversion)<a class="headerlink" href="#upload-a-datafile-with-or-without-conversion" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>Request: POST /datafiles/?params

the file should be sent with "raw_file" key.</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>parameters:</dt>
<dd><ul class="first last simple">
<li>[section_id] - provide an ID of the section in which to store the file (recommended).</li>
<li>[convert] - 1 (default), 0 - whether try to convert the file into native format, if possible. For the moment the following types are supported: neuroshare, ascii-csv (a csv file where every line is a signal).</li>
</ul>
</dd>
</dl>
<p><em>Note. If the file is uploaded into a specific section, the security settings for the new file will be assigned as for the parent section. When no section is specified, the file is private by default.</em></p>
</div>
<div class="section" id="modify-datafile-attributes-move-file-to-section">
<h3>1.6.4. Modify datafile attributes, move file to Section<a class="headerlink" href="#modify-datafile-attributes-move-file-to-section" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>Request: POST /datafiles/&lt;datafile_id&gt;/?params

{
    "caption": "Some REAL description goes here..",
    "section": 1236,
}</pre>
</div>
</div></blockquote>
<p><em>Note. The conversion operation is asynchronous, which means you&#8217;ll not see the status of the conversion immediately in the response. You may use a details request (2.2) to check whether the file was converted successfully or not.</em></p>
<p><em>Note. ACL for the file is not changed when moved to a different section.</em></p>
</div>
<div class="section" id="datafile-conversion">
<h3>1.6.5. Datafile conversion<a class="headerlink" href="#datafile-conversion" title="Permalink to this headline">¶</a></h3>
<p>The following request</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /datafiles/&lt;datafile_id&gt;/convert/</pre>
</div>
</div></blockquote>
<p>initiates file conversion.</p>
</div>
<div class="section" id="download-datafile">
<h3>1.6.6. Download datafile<a class="headerlink" href="#download-datafile" title="Permalink to this headline">¶</a></h3>
<p>When the file is not converted, you may get the originally uploaded file. When file is in native format, it can convert all underlying data into a file with the format specified and return it for download.</p>
<blockquote>
<div><div class="highlight-python"><pre>Request: GET /datafiles/&lt;datafile_id&gt;/download/?params</pre>
</div>
</div></blockquote>
<p>New in development version.
parameters:</p>
<blockquote>
<div><ul class="simple">
<li>[format] - required file format. The following formats are supported: HDF5. Leave this empty to download an original file.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="delete-datafile">
<h3>1.6.7. Delete datafile<a class="headerlink" href="#delete-datafile" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>Request: DELETE /datafiles/&lt;datafile_id&gt;/?params</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>parameters:</dt>
<dd><ul class="first last simple">
<li>[force] - true, false (default) - use &#8220;true&#8221; to delete the file even if there are other users with access to the file. If &#8220;false&#8221; or omitted, the file will not be deleted being in the state having collaborators.</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="manage-permissions">
<h2>1.7. MANAGE PERMISSIONS<a class="headerlink" href="#manage-permissions" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>There is a possibility to share your data with other users in the G-Node Portal. You may share a particular section, which means all resources inside the section become shared. You may share the section recursively, which implies all subsections in the selected section with all their contents will become shared. You may also share a single or multiple datafiles. Datafiles and sections sharing is controlled via the access control lists. Access control lists are just basic lists that show who has access to a given resource. In the ACLs, the following roles are available for a given document or folder:</dt>
<dd><ul class="first last simple">
<li>owner — the owner of the resource (section or file). As an owner you have the ability to modify the ACL, delete the resource, etc.</li>
<li>writer — a collaborator.</li>
<li>reader — a viewer (equivalent to read-only access).</li>
</ul>
</dd>
<dt>A resource (datafile or section) by itself has also a sharing state, which can be</dt>
<dd><ul class="first last simple">
<li>public — all users may see the contents of the resource.</li>
<li>friendly — all friends have a reader role, with no need to assign them for every resource.</li>
<li>private — noone, except users, specified explicitly, may see the resource.</li>
</ul>
</dd>
</dl>
<p>With no dependence on the state, people, assigned explicitly by owner of the resource as readers or writers, have corresponding access to the resource.</p>
<p>By &lt;resource_type&gt; in this paragraph we assume either &#8220;sections&#8221;, either &#8220;datafiles&#8221;.</p>
<div class="section" id="getting-resource-permissions">
<h3>1.7.1. Getting resource permissions<a class="headerlink" href="#getting-resource-permissions" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>GET /&lt;resource_type&gt;/&lt;resource_id&gt;/acl/</pre>
</div>
</div></blockquote>
<p>Response:</p>
<blockquote>
<div><div class="highlight-python"><pre>HTTP SUCCESS (200)

{
    "message": "Here is the list of requested objects.",
    "logged_in_as": "bob",
    "message_type": "object_selected",
    "safety_level": 3,
    "shared_with": {
        "andrey": 1
    }
}</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="update-resource-acl-share-unshare">
<h3>1.7.2. Update resource ACL (share/unshare)<a class="headerlink" href="#update-resource-acl-share-unshare" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>POST /&lt;resource_type&gt;/&lt;resource_id&gt;/acl/?params

{
    "state": "&lt;access level&gt;", # can be public, friendly, private - access level
    "shared_with": {
        "&lt;user_name&gt;": "&lt;user_role&gt;", # a role can be "reader" or "collaborator"
        "&lt;user_id&gt;": "&lt;user_role_id&gt;" # could be IDs as well
    }
}</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>parameters:</dt>
<dd><ul class="first last simple">
<li>[cascade] - true, false (default) - apply to all resources recursivery (when &lt;resource_type&gt; = &#8220;sections&#8221;). Datafiles, found in subsections, will be also updated.</li>
</ul>
</dd>
<dt>New in development version:</dt>
<dd><ul class="first last simple">
<li>[notify]: 1 (default), 0 - whether to notify users by mail that an object was shared.</li>
</ul>
</dd>
</dl>
<div class="section" id="new-in-development-version">
<h4>1.7.2.1. New in development version.<a class="headerlink" href="#new-in-development-version" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="query-data-using-g-node-api">
<h4>1.7.2.2. QUERY DATA USING G-NODE API<a class="headerlink" href="#query-data-using-g-node-api" title="Permalink to this headline">¶</a></h4>
<p>You may select Raw Data objects (Segments, Analog Signals, Spike Trains) based on their attributes and labels and those of their parents and children. You may do that by creating Selections. Selections can be saved for future use.</p>
</div>
</div>
<div class="section" id="create-selection">
<h3>1.7.3. Create Selection<a class="headerlink" href="#create-selection" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>POST /selections/

{
    "obj_type": "analogsignal", # &lt;obj_type&gt; should be of type NEO.
    "querysets": [
        {
            "filter": {
                "name__contains": "V1",
                "date_created__gte": "2006-01-01"
            },
            "filter": {
                "segment__name__contains": "mice"
            },
            "exclude": {
                "label": "red",
                "date_created__gte": "2006-01-01"
            }
        },
        {
            "filter": {
                "sampling_rate": 20000,
        }],
    "save_as": "provide some name here.."
}</pre>
</div>
</div></blockquote>
<p>The way to construct your query is similar to the way described here <a class="reference external" href="https://docs.djangoproject.com/en/dev/topics/db/queries/">https://docs.djangoproject.com/en/dev/topics/db/queries/</a>
In the response you&#8217;ll get selected objects:</p>
<blockquote>
<div><div class="highlight-python"><pre>Response:
TBD</pre>
</div>
</div></blockquote>
<p>If the &#8220;save_as&#8221; parameter was provided, the response will contain &#8220;selection_id&#8221; and &#8220;selection_name&#8221;. You may use this ID to get the contents of a particular selection later.</p>
</div>
<div class="section" id="get-list-of-saved-selections">
<h3>1.7.4. Get list of saved Selections<a class="headerlink" href="#get-list-of-saved-selections" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>GET /selections/</pre>
</div>
</div></blockquote>
<p>In the response you&#8217;ll get all saved selections:</p>
<blockquote>
<div><div class="highlight-python"><pre>Response:
TBD</pre>
</div>
</div></blockquote>
</div>
<div class="section" id="get-saved-selection">
<h3>1.7.5. Get saved Selection<a class="headerlink" href="#get-saved-selection" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>GET /selections/&lt;selection_id&gt;/</pre>
</div>
</div></blockquote>
<p>In the response you&#8217;ll get selected objects:</p>
<blockquote>
<div><div class="highlight-python"><pre>Response:
TBD</pre>
</div>
</div></blockquote>
<div class="section" id="id3">
<h4>1.7.5.1. New in development version.<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="resource-action-history-draft">
<h4>1.7.5.2. RESOURCE ACTION HISTORY (draft)<a class="headerlink" href="#resource-action-history-draft" title="Permalink to this headline">¶</a></h4>
<p>In order not to forget, how certain scientific computations were achieved, or what is the source of a certain analog signal, you may request a history of an action with objects. An action history is a table indicating a source for an operation, description of an operation made and a result.</p>
</div>
</div>
<div class="section" id="get-object-action-history">
<h3>1.7.6. Get object action history<a class="headerlink" href="#get-object-action-history" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>GET /&lt;resource_type&gt;/&lt;resource_id&gt;/history/?params</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>parameters:</dt>
<dd><ul class="first simple">
<li>[start_date] - start date of the history</li>
<li>[end_date] - start date of the history</li>
</ul>
<div class="last highlight-python"><pre>Response:
TBD</pre>
</div>
</dd>
</dl>
</div>
<div class="section" id="get-user-action-history">
<h3>1.7.7. Get user action history<a class="headerlink" href="#get-user-action-history" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><pre>GET /profiles/profile/&lt;user_id&gt;/history/?params</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>parameters:</dt>
<dd><ul class="first simple">
<li>[start_date] - start date of the history</li>
<li>[end_date] - start date of the history</li>
</ul>
<div class="last highlight-python"><pre>Response:
TBD</pre>
</div>
</dd>
</dl>
<p><em>Note. Usually you will deal with the following HTTP status codes:</em></p>
<blockquote>
<div><ul class="simple">
<li>201 - &#8220;Created&#8221; - new object was successfully created.</li>
<li>200 - &#8220;OK&#8221; - the object was successfully updated or GET operation performed successfully.</li>
<li>404 - &#8220;Not Found&#8221; - you have provided an [obj_id], however, such an object does not exist. Or URL is wrond and not supported.</li>
<li>403 - &#8220;Forbidden&#8221; - you don&#8217;t have access to create, modify or view an object.</li>
<li>400 - &#8220;Bad request&#8221; - some of the request parameters are not provided correctly. Consider the &#8220;message&#8221; contents.</li>
<li>401 - &#8220;Unauthorized&#8221; - authorization key not provided.</li>
</ul>
</div></blockquote>
<hr class="docutils" />
<dl class="docutils">
<dt>FUTURE:</dt>
<dd><ul class="first last simple">
<li>bulk sections/datafiles update. just add list of objects to update provided params.</li>
<li>bulk NEO update. using selections / list of IDs</li>
<li>archiving mechanisms</li>
<li>include links in respresentations (<a class="reference external" href="http://www.infoq.com/articles/rest-anti-patterns">http://www.infoq.com/articles/rest-anti-patterns</a>)</li>
<li>(SOLVED) caching!! see google + <a class="reference external" href="http://www.mnot.net/cache_docs/">http://www.mnot.net/cache_docs/</a></li>
<li>(SOLVED) etags???</li>
<li>version management!!!</li>
<li>computations with objects</li>
<li>import / conversion using Google Refine technologies</li>
<li>(SOLVED) NEO: /electrophysiology/info/&lt;neo_id&gt;/ - short info: think about what kind of info could there be, like number of segments/signals in a block, total data in MB etc.</li>
<li>NEO: as above, in /electrophysiology/select/&lt;obj_type&gt;/ - provide short info about every object + a summary about all (total volume, for example)</li>
<li>NEO: /electrophysiology/select/&lt;obj_type&gt;/ add query mechanism</li>
<li>(SOLVED) NEO: if an array data is missing for data-related objects, should we throw an error? or just allow a user to create it? Throw an error</li>
<li>(SOLVED) NEO: should we assign units by default, if not provided? NO</li>
<li>NEO security: based on files? or not?</li>
</ul>
</dd>
</dl>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. DATA API Specification</a><ul>
<li><a class="reference internal" href="#terminology-used-in-this-specification">1.1. Terminology used in this specification</a></li>
<li><a class="reference internal" href="#authentication">1.2. AUTHENTICATION</a><ul>
<li><a class="reference internal" href="#id2">1.2.1. Authentication</a></li>
</ul>
</li>
<li><a class="reference internal" href="#key-api-principles">1.3. KEY API PRINCIPLES</a></li>
<li><a class="reference internal" href="#data-management">1.4. DATA MANAGEMENT</a><ul>
<li><a class="reference internal" href="#create-or-update-data-object">1.4.1. 2.1 Create or update data object</a></li>
<li><a class="reference internal" href="#getting-a-single-object">1.4.2. Getting a single object</a></li>
<li><a class="reference internal" href="#partial-data-requests">1.4.3. Partial Data Requests</a></li>
<li><a class="reference internal" href="#getting-a-list-of-objects">1.4.4. Getting a List of Objects</a></li>
<li><a class="reference internal" href="#data-annotation">1.4.5. Data Annotation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#metadata-management">1.5. METADATA MANAGEMENT</a><ul>
<li><a class="reference internal" href="#getting-list-of-sections">1.5.1. Getting list of sections</a></li>
<li><a class="reference internal" href="#section-create">1.5.2. Section: create</a></li>
<li><a class="reference internal" href="#getting-section-details">1.5.3. Getting section details</a></li>
<li><a class="reference internal" href="#delete-section">1.5.4. Delete section</a></li>
<li><a class="reference internal" href="#getting-list-of-properties">1.5.5. Getting list of properties</a></li>
<li><a class="reference internal" href="#create-or-update-a-property">1.5.6. Create or update a property</a></li>
<li><a class="reference internal" href="#getting-a-property">1.5.7. Getting a property</a></li>
<li><a class="reference internal" href="#delete-property">1.5.8. Delete property</a></li>
</ul>
</li>
<li><a class="reference internal" href="#file-management">1.6. FILE MANAGEMENT</a><ul>
<li><a class="reference internal" href="#getting-list-of-datafiles">1.6.1. Getting list of datafiles</a></li>
<li><a class="reference internal" href="#getting-single-file-details">1.6.2. Getting single file details</a></li>
<li><a class="reference internal" href="#upload-a-datafile-with-or-without-conversion">1.6.3. Upload a datafile (with or without conversion)</a></li>
<li><a class="reference internal" href="#modify-datafile-attributes-move-file-to-section">1.6.4. Modify datafile attributes, move file to Section</a></li>
<li><a class="reference internal" href="#datafile-conversion">1.6.5. Datafile conversion</a></li>
<li><a class="reference internal" href="#download-datafile">1.6.6. Download datafile</a></li>
<li><a class="reference internal" href="#delete-datafile">1.6.7. Delete datafile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#manage-permissions">1.7. MANAGE PERMISSIONS</a><ul>
<li><a class="reference internal" href="#getting-resource-permissions">1.7.1. Getting resource permissions</a></li>
<li><a class="reference internal" href="#update-resource-acl-share-unshare">1.7.2. Update resource ACL (share/unshare)</a><ul>
<li><a class="reference internal" href="#new-in-development-version">1.7.2.1. New in development version.</a></li>
<li><a class="reference internal" href="#query-data-using-g-node-api">1.7.2.2. QUERY DATA USING G-NODE API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-selection">1.7.3. Create Selection</a></li>
<li><a class="reference internal" href="#get-list-of-saved-selections">1.7.4. Get list of saved Selections</a></li>
<li><a class="reference internal" href="#get-saved-selection">1.7.5. Get saved Selection</a><ul>
<li><a class="reference internal" href="#id3">1.7.5.1. New in development version.</a></li>
<li><a class="reference internal" href="#resource-action-history-draft">1.7.5.2. RESOURCE ACTION HISTORY (draft)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#get-object-action-history">1.7.6. Get object action history</a></li>
<li><a class="reference internal" href="#get-user-action-history">1.7.7. Get user action history</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="data_api_index.html">The G-Node DATA API</a><ul>
      <li>Previous: <a href="data_api_index.html" title="previous chapter">The G-Node DATA API</a></li>
      <li>Next: <a href="api_object_examples.html" title="next chapter">2. G-Node API Object Examples</a></li>
  </ul></li>
  </ul></li>
</ul>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/data_api/data_api_specification.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    <h2>Questions/Feedback</h2>
    <p>Having any questions? Got an idea how to improve a service? You're welcome to contact us!<br> Please send your questions/feedback to support-at-g-node.org , we are happy to help!</p>
  </div>
  <div class="footer">
    &copy; Copyright 2011, asobolev.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  
  </body>
</html>